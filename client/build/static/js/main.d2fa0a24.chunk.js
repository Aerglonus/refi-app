(this["webpackJsonprefi-client"]=this["webpackJsonprefi-client"]||[]).push([[0],{276:function(e,t,n){},525:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(0),c=n.n(i),a=n(33),l=n.n(a),s=(n(276),n(79)),o=n(14),d=n(161),u=n.n(d),j=n(3),b=n(4),f=n(162),h=n(270),v=function(){var e=document.createElement("div");e.setAttribute("style","width: 100px; height: 100px; overflow: scroll; position:absolute; top:-9999px;"),document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t};var p={String:function(e){var t=e.value;return Object(r.jsx)("div",{children:t})},Number:function(e){var t=e.value;return Object(r.jsxs)("div",{children:["No: ",t]})},Boolean:function(e){var t=e.value;return Object(r.jsxs)("div",{children:["Value: ",String(t)]})},Map:function(e){var t=e.value;return Object(r.jsx)("div",{children:JSON.stringify(t)})},Geopoint:function(e){var t=e.value;return Object(r.jsxs)("div",{children:["Geopoint ",JSON.stringify(t)]})},Array:function(e){var t=e.value;return Object(r.jsxs)("div",{children:["Array ",JSON.stringify(t)]})},Timestamp:function(e){var t=e.value,n=t._seconds,i=t._nanoseconds;return Object(r.jsxs)("div",{children:["Time ",new Date(1e3*n+i).toISOString()]})}};function O(e){var t=e.value,n=e.type,c=void 0===n?"Map":n,a=Object(i.useState)(!1),l=Object(j.a)(a,2),s=l[0];l[1];if("undefined"===typeof t)return null;var o=p[c]||p.Map;return Object(r.jsx)("div",{className:s?"updated":"",children:Object(r.jsx)(o,{value:t})})}var m=c.a.memo(O),x=n(20),g=Object(x.b)({key:"navigator.path",default:"/users/Yx41lxY7FleBekLSHZAC/friends/3leZCKrEKUelBP3EEKAw"});function y(e){var t=e.columns,n=e.data,i=c.a.useMemo((function(){return{width:150}}),[]),a=c.a.useMemo((function(){return v()}),[]),l=Object(f.useTable)({columns:t,data:n,defaultColumn:i},f.useBlockLayout),s=l.getTableProps,o=l.getTableBodyProps,d=l.headerGroups,u=l.rows,j=l.totalColumnsWidth,p=l.prepareRow,O=c.a.useCallback((function(e){var t=e.index,n=e.style,i=u[t];return p(i),Object(r.jsx)("div",Object(b.a)(Object(b.a)({},i.getRowProps({style:n})),{},{className:"tr",children:i.cells.map((function(e){return Object(r.jsx)("div",Object(b.a)(Object(b.a)({},e.getCellProps()),{},{className:"td",children:e.render("Cell")}))}))}))}),[p,u]);return Object(r.jsxs)("div",Object(b.a)(Object(b.a)({},s()),{},{className:"table",children:[Object(r.jsx)("div",{children:d.map((function(e){return Object(r.jsx)("div",Object(b.a)(Object(b.a)({},e.getHeaderGroupProps()),{},{className:"tr",children:e.headers.map((function(e){return Object(r.jsx)("div",Object(b.a)(Object(b.a)({},e.getHeaderProps()),{},{className:"th",children:e.render("Header")}))}))}))}))}),Object(r.jsx)("div",Object(b.a)(Object(b.a)({},o()),{},{children:Object(r.jsx)(h.a,{height:400,itemCount:u.length,itemSize:35,width:j+a,children:O})}))]}))}var w=function(){var e=Object(i.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],l=Object(x.c)(g),s=Object(j.a)(l,2),o=s[0],d=(s[1],c.a.useMemo((function(){return(null===n||void 0===n?void 0:n.length)>0?Object.keys(n[0]).filter((function(e){return"__METADATA"!==e})).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{Header:e,accessor:e,Cell:function(e){var t,n,i,c=e.row,a=e.value,l=e.column;return Object(r.jsx)(m,{value:a,type:(null===c||void 0===c||null===(t=c.original)||void 0===t||null===(n=t.__METADATA)||void 0===n||null===(i=n.type)||void 0===i?void 0:i[l.id])||"Object"})}}})):[]}),[n]));return Object(i.useEffect)((function(){var e="".concat(o,".table"),t=function(){return!Boolean((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/").length%2)}(o),n=window.listen(e,(function(e){t?a(e):console.log(e)})),r=t?"fs.queryCollection.subscribe":"fs.queryDoc.subscribe",i=window.send(r,{topic:e,path:o}).then((function(e){return console.log(e)}));return console.log({topic:e,path:o}),function(){n(),window.send("fs.unsubscribe",{id:i})}}),[o]),Object(r.jsx)(y,{columns:d,data:n})};var N=function(){var e=Object(x.c)(g),t=Object(j.a)(e,2),n=t[0];return t[1],Object(r.jsxs)("div",{className:"h-full p-2 border border-gray-300 rounded shadow-sm main ",children:[Object(r.jsx)("div",{children:"Filter here"}),Object(r.jsx)(w,{},n)]})};var C=function(){var e=Object(x.c)(g),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(n),l=Object(j.a)(a,2),s=l[0],o=l[1];return Object(i.useEffect)((function(){o(n)}),[n]),Object(r.jsx)("div",{children:Object(r.jsx)("input",{name:"pathInput",type:"text",value:s,onChange:function(e){o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&c(s)},className:"block w-full mt-1 bg-gray-100 border-transparent rounded focus:border-gray-500 focus:bg-white focus:ring-0"})})},k=n(12),S=n(269),E=n(267);n(292);function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return t=Object.keys(e).map((function(e){return{key:[n,e].join("/"),title:e,children:[],isCollection:r}})),Object.keys(e).forEach((function(n){var i=t.find((function(e){return e.title===n}));i&&(i.children=A(e[n],[],i.key,!r))})),t}var T=function(){var e=Object(x.c)(g),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)([]),l=Object(j.a)(a,2),s=l[0],o=l[1],d=Object(i.useRef)({}),u=function(e){var t=S.a(d.current);e.forEach((function(e){var n;t.merge(null===e||void 0===e||null===(n=e.ref)||void 0===n?void 0:n.path.replaceAll("/","."),{})})),d.current=t.value(),o(A(d.current,[]))};return Object(i.useEffect)((function(){var e=n.split("/").reduce((function(e,t){var n=e[e.length-1];return[].concat(Object(k.a)(e),[[n,t].join("/").replace("//","/")])}),[]).filter((function(e,t){return t%2})),t=e.map((function(e){return window.listen(e,(function(e){return u(e)}))})),r=Promise.all(e.map((function(e){return window.send("fs.pathExplorer.subscribe",{topic:e,path:e}).then((function(e){return e.id}))})));return console.log(r),function(){t.forEach((function(e){return e()}))}}),[n]),Object(r.jsx)("div",{children:Object(r.jsx)(E.a,{showLine:!0,treeData:s,onSelect:function(e){e.length>0&&c(e[0])},height:500})})},D=(n(293),Object(d.WidthProvider)(u.a));var P=function(){return Object(r.jsxs)(D,{className:"layout",layout:[{i:"nav-bar",x:0,y:0,w:12,h:1},{i:"sidebar",x:0,y:0,w:3,h:8},{i:"main",x:3,y:0,w:7,h:8},{i:"property",x:10,y:0,w:2,h:8}],cols:12,rowHeight:64,autoSize:!0,margin:[16,16],isDraggable:!1,isResizable:!1,children:[Object(r.jsx)("div",{children:Object(r.jsx)(C,{})},"nav-bar"),Object(r.jsx)("div",{children:Object(r.jsx)(T,{})},"sidebar"),Object(r.jsx)("div",{children:Object(r.jsx)(N,{})},"main"),Object(r.jsx)("div",{children:"Property"},"property")]})},B=function(e){var t=e.title,n=e.children,i=e.footer,c=e.showing;return void 0!==c&&c?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:Object(r.jsxs)("div",{className:"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[Object(r.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:Object(r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),Object(r.jsx)("span",{className:"hidden inline-block align-middle h-screen","aria-hidden":"true",children:"\u200b"}),Object(r.jsxs)("div",{className:"inline-block overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[Object(r.jsx)("div",{className:"px-4 pt-5 pb-4 bg-white sm:p-6 sm:pb-4",children:Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"text-left",children:[Object(r.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900",id:"modal-headline",children:t}),Object(r.jsx)("div",{className:"mt-2",children:n})]})})}),Object(r.jsx)("div",{className:"px-4 py-3 bg-gray-50 sm:px-6 sm:flex sm:flex-row-reverse",children:i})]})]})})}):null},M=n(163),R=n(268),W=n(169),z=(0,W.b.getDefaultRegistry)(),H=(z.fields,z.widgets);var J={ArrayFieldTemplate:function(e){return Object(r.jsxs)("div",{children:[e.items.map((function(e){return e.children})),e.canAdd&&Object(r.jsxs)("button",{type:"button",className:"flex items-center secondary-btn",onClick:e.onAddClick,children:[Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-6 h-6 mr-1 fill-current text-grey hover:text-grey-darkest",children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})})," ","Add field"]})]})},ErrorList:function(e){var t=e.errors;return Object(r.jsx)("ul",{children:t.map((function(e){return Object(r.jsx)("li",{children:e.stack},e.stack)}))})},ObjectFieldTemplate:function(e){return Object(r.jsxs)("div",{children:[e.title,e.properties.map((function(e){return Object(r.jsx)("div",{className:"property-wrapper",children:e.content})}))]})},widgets:Object(b.a)(Object(b.a)({},H),{},{TextWidget:function(e){return Object(r.jsx)("input",{type:"text",className:"input-field",value:e.value,required:e.required,onChange:function(t){return e.onChange(t.target.value)}})},SelectWidget:function(e){var t=e.options,n=t.enumOptions;return t.enumDisabled,Object(r.jsx)("div",{className:"w-full max-w-xs mx-auto",children:Object(r.jsx)("select",{tabIndex:-1,id:"fieldType",className:"input-field",defaultValue:"string",onChange:function(t){return e.onChange(t.target.value)},value:e.value,children:null===n||void 0===n?void 0:n.map((function(e){var t=e.value,n=e.label;return Object(r.jsx)("option",{value:t,children:n},t)}))})})}})},L=Object(W.c)(J),_=function(){var e=Object(i.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(M.b)(),l=(a.register,a.handleSubmit,a.control);a.errors;window.form=a;var s=Object(M.a)({control:l,name:"mainObject"}),o=(s.fields,s.append);s.prepend,s.remove,s.swap,s.move,s.insert;return Object(i.useEffect)((function(){o({fieldName:"",fieldValue:"",fieldType:"string"})}),[]),Object(r.jsxs)("div",{className:"flex flex-row",children:[Object(r.jsx)("div",{className:"flex-1",children:Object(r.jsx)(R.a,{language:"json",value:JSON.stringify(n),options:{minimap:{enabled:!1},automaticLayout:!0}})}),Object(r.jsx)("div",{className:"flex-1",children:Object(r.jsx)(L,{schema:{type:"array",items:{$ref:"#/definitions/field"},definitions:{field:{type:"object",allOf:[{properties:{name:{type:"string"},type:{type:"string",enum:["string","number","map","array","geopoint","null","timestamp"]}}},{oneOf:[{title:"string",properties:{value:{type:"string"}}},{title:"number",properties:{value:{type:"number"}}},{title:"map",properties:{value:{$ref:"#/definitions/field"}}},{title:"array",properties:{value:{type:"array",items:{$ref:"#/definitions/field"}}}},{title:"null",properties:{value:{type:"null"}}}]}]}}},formData:n,onChange:function(e){return c(e.formData)}})})]})};var F=function(){return Object(r.jsx)(s.a,{children:Object(r.jsxs)(o.c,{children:[Object(r.jsx)(o.a,{path:"/login",children:Object(r.jsx)("div",{children:"Login here"})}),Object(r.jsx)(o.a,{path:"/:projectId",children:Object(r.jsx)(P,{})}),Object(r.jsx)(o.a,{path:"/",children:Object(r.jsxs)("div",{children:[Object(r.jsx)(s.b,{to:"/refi-client",children:"Go to my project"}),Object(r.jsx)(B,{showing:!0,title:"Create document",children:Object(r.jsx)(_,{})})]})})]})})},G=n(266);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=Object(G.a)(),q=I.RecoilPersist,K=I.updateState;l.a.render(Object(r.jsx)(s.a,{children:Object(r.jsxs)(x.a,{initializeState:K,children:[Object(r.jsx)(q,{}),Object(r.jsx)(F,{})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[525,1,2]]]);
//# sourceMappingURL=main.d2fa0a24.chunk.js.map